<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Quizalia Pro - Game Show</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
</head>

<body>

    <h1>üé≤ Quizalia Pro</h1>

    <!-- HOME SECTION !!!! -->
    <section id="home">
        <div class="card">
            <h3>üé§ Host a Game</h3>
            <input type="text" id="hostName" placeholder="Host Name">
            <button id="createLobbyBtn">Create Lobby</button>
        </div>
        <div class="card">
            <h3>üéÆ Join Game</h3>
            <input type="text" id="playerName" placeholder="Your Name">
            <input type="text" id="lobbyCodeInput" placeholder="Room Code">
            <button id="joinLobbyBtn">Join</button>
        </div>
    </section>

    <!-- LOBBY SECTION !!!! -->
    <section id="lobby" hidden>
        <div class="card">
            <h2>Room: <span id="lobbyCode">---</span></h2>

            <div class="card sound-card">
                <h3>üîî Buzzer Sound</h3>
                <select id="buzzerSelect" class="custom-select">
                </select>
            </div>

            <canvas id="qrCode"></canvas>
            <ul id="playersList"></ul>
            <button id="startGameBtn" hidden>Start Game</button>
        </div>
    </section>

    <!-- GAME SECTION !!!! -->
    <section id="game" hidden>
        <div id="timerContainer" hidden>
            <div id="progressBarContainer">
                <div id="progressBar"></div>
            </div>
        </div>

        <!-- WHEEL OVERLAY -->
        <div id="slotMachineOverlay" hidden>
            <div class="slot-machine-wrap">
                <div id="slotReel" class="slot-reel">
                    <div class="slot-card"></div>
                    <div class="slot-card"></div>
                    <div class="slot-card"></div>
                    <div class="slot-card"></div>
                    <div class="slot-card"></div>
                </div>
            </div>
        </div>

        <!-- HOST VIEW -->
        <div id="hostView" hidden>
            <div class="theme-controls card">
                <button id="randomThemeBtn">üé∞ Random Spin</button>
                <button id="selectThemeBtn">üìÇ Pick Theme</button>
                <button id="keepThemeBtn">üîÅ Keep Last</button>
                <button id="manualModeBtn" class="btn-gm gray">‚ö° Manual Buzzer</button>
            </div>

            <!-- THEME LIST MODAL -->
            <div id="themeListModal" class="card" hidden
                style="position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); z-index:1100; max-height: 80vh; overflow-y: auto;">
                <h3>Select a Theme</h3>
                <div id="themeButtonsContainer"></div>
                <button onclick="document.getElementById('themeListModal').hidden = true">Close</button>
            </div>

            <!-- GAME MASTER ACTION PANNEL -->
            <div id="gmActionPanel" class="card" hidden>
                <h2 id="activeWinnerName" style="color:#f1c40f">---</h2>
                <div class="gm-controls">
                    <button id="validateBtn" class="btn-gm green">‚úÖ CORRECT</button>
                    <button id="wrongBtn" class="btn-gm orange">‚ùå WRONG</button>
                    <button id="resetRoundBtn" class="btn-gm gray">üîÑ CLEAR / STOP</button>
                </div>

                <table class="answer-table">
                    <tr>
                        <th class="easy">E1</th>
                        <td id="tableAnsE1"></td>
                        <th class="easy">E2</th>
                        <td id="tableAnsE2"></td>
                    </tr>
                    <tr>
                        <th class="medium">M1</th>
                        <td id="tableAnsM1"></td>
                        <th class="medium">M2</th>
                        <td id="tableAnsM2"></td>
                    </tr>
                    <tr>
                        <th class="hard">H1</th>
                        <td id="tableAnsH1"></td>
                        <th class="hard">H2</th>
                        <td id="tableAnsH2"></td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- FULL SCREEN CARD -->
        <div id="fullScreenCard" class="full-overlay" hidden>
            <button id="forceStopBtn" class="close-x">‚úñ STOP ROUND</button>
            <div class="grid-layout">
                <div class="box easy"><strong>E1:</strong>
                    <p id="qE1"></p>
                    <hr><strong>ANS:</strong> <span id="cardAnsE1"></span>
                </div>
                <div class="box easy"><strong>E2:</strong>
                    <p id="qE2"></p>
                    <hr><strong>ANS:</strong> <span id="cardAnsE2"></span>
                </div>
                <div class="box medium"><strong>M1:</strong>
                    <p id="qM1"></p>
                    <hr><strong>ANS:</strong> <span id="cardAnsM1"></span>
                </div>
                <div class="box medium"><strong>M2:</strong>
                    <p id="qM2"></p>
                    <hr><strong>ANS:</strong> <span id="cardAnsM2"></span>
                </div>
                <div class="box hard"><strong>H1:</strong>
                    <p id="qH1"></p>
                    <hr><strong>ANS:</strong> <span id="cardAnsH1"></span>
                </div>
                <div class="box hard"><strong>H2:</strong>
                    <p id="qH2"></p>
                    <hr><strong>ANS:</strong> <span id="cardAnsH2"></span>
                </div>
            </div>
        </div>

        <!-- PLAYER VIEW -->
        <div id="playerView" hidden>
            <div class="card">
                <h2 id="playerThemeDisplay">Wait for Host...</h2>
                <select id="buzzerSelectPlayer" class="custom-select">
                </select>
            </div>
            <button id="buzzBtn">BUZZ !</button>
        </div>
    </section>

    <script type="module" src="script.js"></script>
</body>

</html>